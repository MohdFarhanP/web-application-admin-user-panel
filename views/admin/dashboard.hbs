<link rel="stylesheet" href="/styles/dashboard.css">
{{!-- nav bar --}}

<nav class="navbar navbar-dark bg-dark">
  <a class="navbar-brand">Navbar</a>
  <form class="form-inline" action="/admin/search" method="post">
    <input class="form-control mr-sm-2" type="search" name="search" placeholder="Search" aria-label="Search">
    <button class="btn btn-outline-success my-2 my-sm-0" type="submit">Search</button>
  </form>
</nav>


{{!-- /nav bar --}}
<h1 class="display-4 m-3 bg-dark text-white">Users Details</h1>
<div class="container">
<form action="/admin/logout" method="post"><button type="submit" class="btn btn-danger" id="logout">Log out</button></form>

<button type="submit" id="addbtn" class="btn btn-success " onclick="showAdd()">AddUser</button>
</div>
{{!-- table --}}

<div class="container-fluid mt-3">
  <table class="table table-striped table-bordered">
    <thead class="table-dark">
      <tr>
        <th scope="col">#</th>
        <th scope="col">Username</th>
        <th scope="col" colspan="2" class="text-center">Actions</th>
      </tr>
    </thead>
    <tbody>
      {{#each data}}
      <tr>
        <th scope="row" class="align-middle">{{@index}}</th>
        <td class="align-middle">{{userName}}</td>
        <td class="align-middle text-center">
          <button type="button" class="btn btn-warning btn-sm" onclick="showEdit('{{this.userName}}','{{this._id}}')">Edit</button>
        </td>
        <td class="align-middle text-center">
          <form action="/admin/delete" method="post" onsubmit="return confirm('Are you sure want to delete this user ? ')">
           <input type="hidden" name="id" value="{{this._id}}">
          <button type="submit" class="btn btn-danger btn-sm">Delete</button>
          </form>
        </td>
      </tr>
      {{/each}}
      <!-- More rows can go here -->
    </tbody>
  </table>
</div>
{{!-- /table end --}}

{{!-- edit field --}}
<div class="card bg-light mb-3 " id="edit" style="max-width: 40rem;display: none;">
  <div class="card-header text-center d-flex justify-content-between ">Edit users
    <button type="button" onclick="hideEdit()" class="close" id="exitBtn" aria-label="Close">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <form action="/admin/saveChange" method="post">
    <div class="card-body">
      <div class="mb-3">
        <input type="text" id="id" name="id" hidden>
        <label for="username">Username</label>
        <input type="text" class="form-control" name="username" id="username" placeholder="Username">
      </div>
      <div class="mb-3">
        <label for="password">Password</label>
        <input type="password" class="form-control" name="password" id="password" placeholder="Password">
      </div>
      <div class="text-center">
        <button type="submit" class="btn btn-warning">Save Changes</button>
      </div>
    </div>
  </form>
</div>
{{!-- /edit field --}}


{{!-- addUser  --}}

<div class="card bg-secondary mb-3 " id="add" style="max-width: 40rem;display: none;">
  <div class="card-header text-center d-flex justify-content-between ">Add Users
    <button type="button" onclick="hideAdd()" class="close" aria-label="Close">
      <span aria-hidden="true">&times;</span>
    </button>
  </div>
  <form action="/admin/addUser" method="post">
    <div class="card-body">
      <div class="mb-3">
        <label for="username">Username</label>
        <input type="text" class="form-control" name="UserName"  placeholder="Username">
      </div>
      <div class="mb-3">
        <label for="password">Password</label>
        <input type="password" class="form-control" name="Password"  placeholder="Password">
      </div>
      <div class="text-center">
        <button type="submit" class="btn btn-success">Add User</button>
      </div>
    </div>
  </form>
</div>

{{!-- /addUser --}}

<script>

  function showEdit(userName,id) {
    document.getElementById('edit').style.display = 'block';
    document.getElementById('username').value = userName;
    document.getElementById('id').value = id; 
  }
  function hideEdit() {
    document.getElementById('edit').style.display = 'none'
  }
  


  function showAdd() {
    document.getElementById('add').style.display = 'block';
  }
  function hideAdd() {
    document.getElementById('add').style.display = 'none'
  }


</script>